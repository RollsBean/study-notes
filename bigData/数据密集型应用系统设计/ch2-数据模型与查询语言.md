# 第2章 数据模型与查询语言

## 关系模型与文档模型

最著名的数据模型可能是 SQL，核心在于商业数据处理。

### NoSQL 的诞生

采用 NoSQL 的几个因素：
* 比关系数据库更哈的扩展性需求，支持超大数据集或超高写入吞吐量。
* 偏爱免费和开源软件。
* 关系模型不能很好支持一些特定查询操作。
* 渴望有更动态和表达力的数据模型。

### 对象-关系不匹配

SQL 模型需要应用代码的对象与表、行和列的数据模型之间要有转换层。

### 文档数据库

文档数据库是以某种方式的层次模型：即在其父记录中保存了嵌套记录（一对多关系），而不是存储在单独的表中。

### 关系数据库和文档数据库比较

1. 如果数据具有类似文档的结构（即一对多关系树，通常一次加载整个树），那么使用文档模型更合适；
2. 如果需要直接访问文档中的嵌套项，文档模型就不太合适了，使用关系数据库更合适一些；

## 数据查询语言

SQL 是一种**声明式**查询语言，其他很多语言都是命令式的（编写执行代码逻辑），比如 Java 代码告诉计算机要怎么执行特定操作，我们可以根据代码推理整个执行过程。

而声明式查询语言（SQL 或关系代数），只需要指定所需的数据模式、条件和如果转换数据即可。我们不需要知道它的实现逻辑。

## 图状数据模型

如果数据大多是多对多的的关系并且比较复杂，图模型会更加合适。

图由两种对象组成：**顶点**（也称为结点或实体）和**边**（也称为关系或弧）。适合建模为图的例子：

_社交网络_  
&nbsp;&nbsp;&nbsp;&nbsp;顶点是人，边指示哪些人彼此认识。  
_Web 图_  
&nbsp;&nbsp;&nbsp;&nbsp;顶点是网页，边表示与其他页面的 HTML 链接。  
_公路网或铁路网_  
&nbsp;&nbsp;&nbsp;&nbsp;顶点是交叉路口，边表他们之间的公路或铁路线。  

### 属性图

顶点包括：

* 唯一标识符
* 出边的集合
* 人边的集合
* 属性的集合（键-值对）

边包括：

* 唯一标识符
* 边开始的顶点（尾部顶点）
* 边结束的顶点（头部顶点）
* 描述两个顶点间关系类型的标签
* 属性的集合（键-值对）

### Cypher 查询语言

Cypher 是一种声明式查询语言，最早为 Neo4J 而创建。

### 三元存储与 SPARQL

三元存储有三部分存储内容，分别是主体、谓语和客体。比如张三喜欢苹果。

## 小结

三种模型（文档模型、关系模型和图模型）都有广泛应用，不同模型之间页而已相互模拟，但是处理起来可能会更麻烦一些。

